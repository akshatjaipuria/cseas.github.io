---
layout: single
author: Abhijeet Singh
toc: true
toc_sticky: true
title: Install NS2 (Network Simulator) on Ubuntu 18.04
header:
  image: /assets/images/ns2/ns2-header.webp
  teaser: /assets/images/ns2/ns2-teaser.jpg
excerpt: NS2 is an open-source simulation tool that runs on Linux. It is a discreet event simulator targeted at networking research.

sidebar:
  - title: "NS2"
    image: /assets/images/ns2/ns2-teaser.jpg
    image_alt: "image"
    text: "A Simulation Tool for Linux"
  - title: "Installation"
    text: "Instructions provided for Ubuntu 18.04"

---
<!-- Add post written in markdown below -->

---

# Introduction

[NS2](http://nsnam.sourceforge.net/wiki/index.php/User_Information) is an open-source simulation tool that runs on Linux. It is a discreet event simulator targeted at networking research and provides substantial support for simulation of routing, multicast protocols and IP protocols, such as UDP, TCP, RTP and SRM over wired and wireless (local and satellite) networks.

---

# Pre-requisites

To view your network simulation traces made using ns-2, you'll need [Nam: Network Animator](https://www.isi.edu/nsnam/nam/).

Nam is a Tcl/TK based animation tool for viewing network simulation traces and real world packet traces. It supports topology layout, packet level animation, and various data inspection tools.

Installing it by running the following command in your terminal:
```sh
sudo apt-get install -y nam
```
![](/assets/images/ns2/ss2.png){: .align-center}

---

# Installation

Run the following command in your terminal to install ns-2:
```sh
sudo apt-get install -y ns2
```
![](/assets/images/ns2/ss1.png){: .align-center}

---

# Check your installation

You can check your installation by running a simple [Tcl](https://www.tcl.tk/about/language.html) script.

Create a file:
```sh
gedit add.tcl
```
Paste the following code in the file:
```tcl
set a 20
set b 30
set c [expr $a+$b]
puts $c
```
Run in the terminal using ns-2:
```sh
ns add.tcl
```
![](/assets/images/ns2/ss3.png){: .align-center}

---

# Running a simple simulation

Paste the following code in a file `simple.tcl`:
```tcl
#Create a simulator object
set ns [new Simulator]

#Define different colors for data flows (for NAM)
$ns color 1 Blue
$ns color 2 Red

#Open the NAM trace file
set nf [open out.nam w]
$ns namtrace-all $nf

#Define a 'finish' procedure
proc finish {} {
        global ns nf
        $ns flush-trace
        #Close the NAM trace file
        close $nf
        #Execute NAM on the trace file
        exec nam out.nam &
        exit 0
}

#Create four nodes
set n0 [$ns node]
set n1 [$ns node]
set n2 [$ns node]
set n3 [$ns node]

#Create links between the nodes
$ns duplex-link $n0 $n2 2Mb 10ms DropTail
$ns duplex-link $n1 $n2 2Mb 10ms DropTail
$ns duplex-link $n2 $n3 1.7Mb 20ms DropTail

#Set Queue Size of link (n2-n3) to 10
$ns queue-limit $n2 $n3 10

#Give node position (for NAM)
$ns duplex-link-op $n0 $n2 orient right-down
$ns duplex-link-op $n1 $n2 orient right-up
$ns duplex-link-op $n2 $n3 orient right

#Monitor the queue for link (n2-n3). (for NAM)
$ns duplex-link-op $n2 $n3 queuePos 0.5


#Setup a TCP connection
set tcp [new Agent/TCP]
$tcp set class_ 2
$ns attach-agent $n0 $tcp
set sink [new Agent/TCPSink]
$ns attach-agent $n3 $sink
$ns connect $tcp $sink
$tcp set fid_ 1

#Setup a FTP over TCP connection
set ftp [new Application/FTP]
$ftp attach-agent $tcp
$ftp set type_ FTP


#Setup a UDP connection
set udp [new Agent/UDP]
$ns attach-agent $n1 $udp
set null [new Agent/Null]
$ns attach-agent $n3 $null
$ns connect $udp $null
$udp set fid_ 2

#Setup a CBR over UDP connection
set cbr [new Application/Traffic/CBR]
$cbr attach-agent $udp
$cbr set type_ CBR
$cbr set packet_size_ 1000
$cbr set rate_ 1mb
$cbr set random_ false


#Schedule events for the CBR and FTP agents
$ns at 0.1 "$cbr start"
$ns at 1.0 "$ftp start"
$ns at 4.0 "$ftp stop"
$ns at 4.5 "$cbr stop"

#Detach tcp and sink agents (not really necessary)
$ns at 4.5 "$ns detach-agent $n0 $tcp ; $ns detach-agent $n3 $sink"

#Call the finish procedure after 5 seconds of simulation time
$ns at 5.0 "finish"

#Print CBR packet size and interval
puts "CBR packet size = [$cbr set packet_size_]"
puts "CBR interval = [$cbr set interval_]"

#Run the simulation
$ns run
```
Run the simulation from the terminal using ns-2:
```sh
ns simple.tcl
```
Click on the play button to start the simulation:
![](/assets/images/ns2/ss4.png){: .align-center}

If you are a beginner to network simulation, you can find the explanation for the above script [here](http://nile.wpi.edu/NS/simple_ns.html).

---

# Contribute

This website is open source. :hearts:  
[Improve this page](https://github.com/cseas/cseas.github.io/blob/master/_posts/2018-11-11-ns2.md)